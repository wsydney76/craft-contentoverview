{# @var sectionConfig \wsydney76\contentoverview\models\Section #}

<a href="{{ entry.cpEditUrl }}" target="{{ settings.linkTarget }}"
   class="co-entry {{ entry.isDraft ? 'draft' : 'published' }} {{ entry.isUnpublishedDraft ? 'provisional' }}">


    {% if sectionConfig.layout != 'line' %}
        <div class="co-image">
            {% set image = null %}
            {% set imageField = sectionConfig.getImageField(entry) %}
            {% if imageField %}
                {% set image = entry.getFieldValue(imageField).one %}
            {% endif %}
            {% if image %}
                {{ image.img(settings.transforms[sectionConfig.layout]) }}
            {% else %}
                {% set icon = sectionConfig.getIcon(entry) %}
                {% set icon = icon !=  '' ? view.renderObjectTemplate(icon, entry) :  '@appicons/newspaper.svg' %}
                {{ svg(icon)|attr({width:'20px', height: '20px'}) }}
            {% endif %}
        </div>
    {% endif %}


    {% set layout = sectionConfig.layout  ? sectionConfig.layout : settings.defaultLayout %}
    {% set style = entry.level and layout in ['list','line']  ? "padding-left: #{(entry.level-1)*32}px" : '' %}

    <div class="co-content" style="{{ style }};">
        <div class="co-status">

            {% if entry.isDraft %}
                <div data-icon="draft" aria-hidden="true"></div>
            {% else %}
                <div class="status {{ entry.status }}"></div>
            {% endif %}

            {% set popupInfo = sectionConfig.getPopupInfo(entry) %}
            {% if popupInfo %}
                <div class="info" tabindex="0" aria-role="button"
                     aria-label="{{ "Information"|t('contentoverview') }}">
                        {{ view.renderObjectTemplate(popupInfo, entry)|raw }}
                </div>
            {% endif %}
        </div>


        <div class="co-text">
            <div class="co-title">
                {{ entry.title }}
            </div>

            <div class="co-info">
                {% set info = sectionConfig.getInfo(entry) %}

                {% if info %}
                    <div>
                        {{ view.renderObjectTemplate(info, entry)|raw }}
                    </div>
                {% endif %}

                {% set template = sectionConfig.getInfoTemplate(entry) %}
                {% if template %}
                    {{ view.renderTemplate(template, {entry}, 'site')|raw }}
                {% endif %}
            </div>
        </div>
    </div>
</a>