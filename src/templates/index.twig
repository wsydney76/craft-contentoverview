{# @params page, settings #}

{# @var settings \wsydney76\contentoverview\models\Settings #}
{# @var page \wsydney76\contentoverview\models\Page #}

{% extends "_layouts/cp.twig" %}

{% set selectedSubnavItem  = page.pageKey %}

{% set title = settings.pluginTitle|t('site') ~ ': ' ~ page.label|t('site') %}

{% set pageTabs = page.tabs %}

{# tabs is a cp variable, see https://craftcms.com/docs/4.x/extend/cp-templates.html#adding-tabs #}
{% set tabs = page.cpTabs %}


{% block contextMenu %}
    {% include "contentoverview/partials/sitemenu.twig" %}
{% endblock %}

{% block content %}

    {% include [
        '_contentoverview/partials/page.twig',
        'contentoverview/partials/page.twig'
    ] %}

{% endblock %}

{% block sidebar %}
    {% if settings.showPages == 'sidebar' %}
        {% include 'contentoverview/partials/sidebar.twig' %}
    {% endif %}

    {% if page.blocks['sidebar'] is defined %}
        {% include settings.customTemplatePath ~ '/' ~ page.blocks['sidebar'] ignore missing %}
    {% endif %}
{% endblock %}

{% block details %}
    {% if page.blocks['details'] is defined %}
        {% include settings.customTemplatePath ~ '/' ~ page.blocks['details'] ignore missing %}
    {% endif %}
{% endblock %}

{% block toolbar %}
    {% if page.blocks['toolbar'] is defined %}
        {% include settings.customTemplatePath ~ '/' ~ page.blocks['toolbar'] ignore missing %}
    {% endif %}
{% endblock %}

{% block footer %}
    {% if page.blocks['footer'] is defined %}
        {% include settings.customTemplatePath ~ '/' ~ page.blocks['footer'] ignore missing %}
    {% endif %}
{% endblock %}